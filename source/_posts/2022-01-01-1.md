---
title: FE-Interview
index_img: /img/2022-01-01-1.jpeg
tags: 前端
categories: 面试
abbrlink: 12d2438b
date: 2022-01-01 23:28:37
---

## 第 1 天 (2022.02.28)

### 1. 什么时候使用状态管理器？

1. 组件状态要在多个组件共享时
1. 某个组件状态需要在任何地方可以拿到
1. 一个组件需要改变全局状态时
1. 一个组件需要改变另一个组件状态时
1. 组件状态提升提升不能满足需求时，层级过多时。

### 2. render 函数中 return 如果没有使用()会有什么问题？

避免遇到自动插入分号陷阱。

我们在使用 JSX 语法书写 react 代码时，babel 会将 JSX 语法编译成 js，同时会在每行自动添加分号（；），如果 return 后换行了，那么就会变成 return； 一般情况下会报错：

Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.
上面这段英文翻译成中文：

渲染没有返回任何内容。这通常意味着缺少 return 语句。或者，为了不渲染，返回 null。
为了代码可读性我们一般会在 return 后面添加括号这样代码可以折行书写，否则就在 return 后面紧跟着语句，这样也是可以的。

举两个正确的书写例子：

```jsx
const Nav = () => {
  return (
    <nav className="c_navbar">
      { some jsx magic here }
    </nav>
    )
  }

const Nav = () => {
return <nav className="c_navbar">
    { some jsx magic here }
  </nav>
}
```

错误的写法：

```jsx
const Nav = () => {
  return
    <nav className="c_navbar">
      { some jsx magic here }
    </nav>
}
```

### 3. componentWillUpdate 可以直接修改 state 的值吗？

直接修改不可以，但是加上条件就可以。

文档原文：“你也可以在 componentDidUpdate() 中直接调用 setState()，但请注意它必须被包裹在一个条件语句里，正如上述的例子那样进行处理，否则会导致死循环。它还会导致额外的重新渲染，虽然用户不可见，但会影响组件性能。”

componentWillReceiveProps 同理

### 4. 说说你对 React 的渲染原理的理解

1. React 会调用 React.render()构建一颗 DOM 树，生成虚拟 dom。
2. 通过改变 state 或 props 触发更新。
3. 对比新旧虚拟 dom，diff 算法，深度优先，将实际需要改变的反应到真实 dom。

## 第 2 天 (2022.03.01)

### 5. 什么渲染劫持？

一般和高阶组件（HOC）一起解释。

高阶组件在 render 的时候可以做其他操作，从而控制原组件的渲染输出，这种改变原组件渲染的方式称为 渲染劫持。

在高阶组件中，组合渲染和条件渲染都是渲染劫持的一种，通过反向继承，不仅可实现渲染劫持，还可以增强原组件 render 函数。

除了 HOC，当新写一个组件，继承自一个已有的组件，可以随便修改 render 函数，使用 state、props 等改变原组件的渲染，都叫渲染劫持。

#### PS: HOC 反向继承

TODO：

### 6. React Intl是什么原理？

React Intl 用途是国际化库，提供组件、日期等国际化方法。

做国际化就类似于字体文件，通过切换语言，加载不同语言包到本地.

最外层包一个Provider。调用库中方法，完成国际化。

前端国际化核心步骤有两步：

- 创建资源文件，以 key-value 方式存储
- 加载资源文件，将页面上 key 的内容替换为相关 value

### 7. 怎么实现React组件的国际化呢？

 使用 i18next 以及 react-i18next 配合 i18next-scanner，通过 grunt 跑 task 自动扫描生成 json 文件。

 现在大厂比较常用的方案是，使用AST，每次开发完新版本，通过AST去扫描所有的代码，找出代码中的中文，以中文为key，调用智能翻译服务，去帮项目自动生成json文件。这样，再也不需要人为去维护json文件，一切都依赖工具进行自动化。

## 第 3 天（2022.3.2）

- [说说Context有哪些属性？](https://github.com/haizlin/fe-interview/issues/945)
- [怎么使用Context开发组件？](https://github.com/haizlin/fe-interview/issues/944)
- [为什么React并不推荐我们优先考虑使用Context？](https://github.com/haizlin/fe-interview/issues/943)
- [除了实例的属性可以获取Context外哪些地方还能直接获取Context呢？](https://github.com/haizlin/fe-interview/issues/942)
- [childContextTypes是什么？它有什么用？](https://github.com/haizlin/fe-interview/issues/941)
- [contextType是什么？它有什么用？](https://github.com/haizlin/fe-interview/issues/940)

## Reference

- <https://github.com/qiu-deqing/FE-interview>
- <https://github.com/haizlin/fe-interview>
